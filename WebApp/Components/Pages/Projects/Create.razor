@page "/projects/create"
@rendermode InteractiveServer

<RadzenTemplateForm Data="@_projects" TItem="Projects" Submit="CreateNewProject">
    <h3 class="text-center text-primary mb-4">Create New Project</h3>
    <ValidationSummary class="alert alert-danger" />

    <div class="form-group mb-4">
        <RadzenLabel Text="Name" />
        <RadzenTextBox data-testid="project_name"
                       @bind-Value="_projects.Name"
                       class="input-style"
                       Name="name" />
        <RadzenRequiredValidator Component="name" Text="Name is required" />
    </div>

        <div class="form-group mb-4">
        <RadzenLabel Text="Description" />
        <RadzenTextBox data-testid="project_description"
                       @bind-Value="_projects.Description"
                       class="input-style"
                       Name="description" />
        <RadzenRequiredValidator Component="description" Text="Description is required" />
    </div>
    
    <CreateEditActions EntityName="projects" CreateEdit="Create" />
</RadzenTemplateForm>

@code {
    private readonly Projects _projects = new();
    
    private async Task CreateNewProject()
    {
        await ProjectModel.AddProject(_projects);
        NavigationManager.NavigateTo("/");
        StateHasChanged();
        await FormNotificationService.NotifySuccess("Project Created Successfully!");
    }
}

@attribute [Authorize]
@code {
    private Requirements _requirements = new();
    private List<RequirementsFile>? _existingFiles = [];

    [EditorRequired] [Parameter] public int Id { get; set; }

    public async Task ViewInlineDialog()
    {
        _requirements = await RequirementsModel.GetRequirementByIdAsync(Id);
        _existingFiles = await RequirementsFilesModel.GetFilesByRequirementId(Id);

        await DialogService.OpenAsync($"View {nameof(Requirements)} {Id}", ds =>
                @<div>
                    <RadzenFieldset Text="Requirements">
                        <RadzenStack Orientation="Orientation.Horizontal">
                            <RadzenLabel Text="Id:" Style="font-weight: bold;"/>
                            <RadzenLabel Text="@_requirements.Id.ToString()"/>
                        </RadzenStack>

                        <RadzenStack Orientation="Orientation.Horizontal">

                            <RadzenLabel Text="Name:" Style="font-weight: bold;"/>
                            <RadzenLabel Text="@_requirements.Name"/>
                        </RadzenStack>

                        <RadzenStack Orientation="Orientation.Horizontal">
                            <RadzenLabel Text="Description:" Style="font-weight: bold;"/>
                            <RadzenLabel Text="@_requirements.Description"/>
                        </RadzenStack>


                        <RadzenStack Orientation="Orientation.Horizontal">
                            <RadzenLabel Text="Created At:" Style="font-weight: bold;"/>
                            <RadzenLabel Text="@_requirements.CreatedAt.ToString(CultureInfo.CurrentCulture)"/>
                        </RadzenStack>

                        <RadzenStack Orientation="Orientation.Horizontal">
                            <RadzenLabel Text="Modified At:" Style="font-weight: bold;"/>
                            <RadzenLabel Text="@_requirements.ModifiedAt.ToString(CultureInfo.CurrentCulture)"/>
                        </RadzenStack>

                        <RadzenStack Orientation="Orientation.Horizontal">
                            <RadzenLabel Text="Created By:" Style="font-weight: bold;"/>
                            <RadzenLabel Text="@_requirements.CreatedBy"/>
                        </RadzenStack>

                        <RadzenStack Orientation="Orientation.Horizontal">
                            <RadzenLabel Text="Modified By:" Style="font-weight: bold;"/>
                            <RadzenLabel Text="@_requirements.ModifiedBy"/>
                        </RadzenStack>
                    </RadzenFieldset>

                    <RadzenFieldset Icon="visibility">
                        <RadzenStack Orientation="Orientation.Horizontal">
                            <RadzenLabel Text="Linked Requirement Specification:" Style="font-weight: bold;"/>
                            <RadzenLabel Text="@_requirements.RequirementsSpecificationId.ToString()"/>
                        </RadzenStack>
                        <RadzenStack Orientation="Orientation.Horizontal">
                            <RadzenLabel Text="Priority:" Style="font-weight: bold;"/>
                            <RadzenLabel Text="@_requirements.Priority.ToString()"/>
                        </RadzenStack>
                        <RadzenStack Orientation="Orientation.Horizontal">
                            <RadzenLabel Text="Workflow:" Style="font-weight: bold;"/>
                            <RadzenLabel Text="@_requirements.WorkflowStatus.ToString()"/>
                        </RadzenStack>
                    </RadzenFieldset>

                    <RadzenFieldset Text="Files">
                        <FileViewer Files="_existingFiles"
                                    EntityName="@nameof(RequirementsFile)"/>
                    </RadzenFieldset>

                </div>,
                new DialogOptions { CloseDialogOnOverlayClick = true, Draggable = true, CloseDialogOnEsc = true, Resizable = true });
    }

}
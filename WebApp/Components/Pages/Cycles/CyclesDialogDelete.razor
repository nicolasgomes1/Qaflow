@attribute [Authorize]
@inject CyclesModel CyclesModel
<RadzenButton Icon="delete" ButtonStyle="ButtonStyle.Light" Style="color: red;"
              data-testid="delete"
              MouseEnter="@(args => AppTooltipService.ShowTooltip(args, $"Delete {nameof(CyclesModel)}"))"
              MouseLeave="@AppTooltipService.HideTooltip"
              Click="@(() => DeleteItem(Id))"
              Size="ButtonSize.ExtraSmall"/>

@code {
    [EditorRequired] [Parameter] public int Id { get; set; }
    [EditorRequired] [Parameter] public EventCallback OnRequirementDeleted { get; set; }

    private async Task DeleteItem(int item)
    {
        var confirmed = await DialogService.Confirm($"Are you sure you want to delete this {nameof(CyclesModel)}?", $"Delete {nameof(Cycles)}");

        if (confirmed is true)
        {
            var hey = await CyclesModel.DeleteCycle(item);

            if (OnRequirementDeleted.HasDelegate)
            {
                await OnRequirementDeleted.InvokeAsync();
            }

            switch (hey)
            {
                case true:
                    await FormNotificationService.NotifyError("Can't delete cycle has it is beign used");
                    break;
                case false:
                    await FormNotificationService.NotifySuccess($"Cycle with Id {item} was successfully deleted");
                    break;
            }
        }
    }

}